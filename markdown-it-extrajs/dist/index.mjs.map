{
  "version": 3,
  "sources": ["../src/plugin.ts", "../src/base64js.ts", "../src/create-tags.ts", "../src/index.ts"],
  "sourcesContent": ["// @deno-types=\"@types/markdown-it\"\nimport type MarkdownIt from \"markdown-it\";\nimport markdownItFrontMatter from \"markdown-it-front-matter\";\nimport grayMatter from \"gray-matter\";\nimport { createScriptTag, createTemplateTag } from \"./create-tags.ts\";\nimport type { ExtraJSFrontMatter, ExtraJSOptions } from \"./types.ts\";\n\nconst defaultOptions: ExtraJSOptions = {\n  discardFrontMatter: true,\n  useMermaid: false,\n  mermaidUrl: \"https://esm.sh/mermaid\",\n  useFontAwesome: false,\n  fontAwesomeUrl: \"https://esm.sh/@fortawesome\",\n  useUnoCSS: false,\n  unoCSSUrl: \"https://esm.sh/@unocss\",\n  unoCSSPresetIconCDN: \"https://esm.sh/\",\n  outputScriptTag: true,\n};\n\nexport function extraJsPlugin(md: MarkdownIt, userOptions: ExtraJSOptions) {\n  const { renderer: { render }, parse } = md;\n\n  let frontMatter: ExtraJSFrontMatter = {};\n\n  if (userOptions.discardFrontMatter) {\n    md.use(markdownItFrontMatter, (_fm: string) => {\n      // Discard front matter\n    });\n  }\n\n  md.parse = (markdown: string, env) => {\n    frontMatter = grayMatter(markdown).data.extrajs ?? {};\n    return parse.call(md, markdown, env);\n  };\n\n  md.renderer.render = function (\n    ...args\n  ) {\n    const options: ExtraJSOptions = {\n      ...defaultOptions,\n      ...userOptions,\n      ...(!frontMatter.useMermaid ? { useMermaid: false } : {}),\n      ...(!frontMatter.useFontAwesome ? { useFontAwesome: false } : {}),\n      ...(!frontMatter.useUnoCSS ? { useUnoCSS: false } : {}),\n    };\n\n    return render.apply(md.renderer, args) +\n      createTemplateTag(options, frontMatter) +\n      createScriptTag(options, frontMatter);\n  };\n}\n\nexport default extraJsPlugin;\n", "export default {\n  INIT_MERMAID: \"dmFyIGk9YXN5bmModD17fSxhPXt9LGU9e30pPT57aWYodC5tZXJtYWlkVXJsKXtsZXQgcj1hd2FpdCBpbXBvcnQodC5tZXJtYWlkVXJsKTtyLmRlZmF1bHQuaW5pdGlhbGl6ZSgpLHIuZGVmYXVsdC5ydW4oKX19O2V4cG9ydHtpIGFzIGRlZmF1bHR9OwovLyMgc291cmNlTWFwcGluZ1VSTD1pbml0LW1lcm1haWQubWpzLm1hcAo=\",\n  INIT_FONT_AWESOME: \"dmFyIG49bz0+T2JqZWN0LmVudHJpZXMobykuZmlsdGVyKChbcixzXSk9PnIhPT0icHJlZml4IiYmciE9PSJkZWZhdWx0IiYmdHlwZW9mIHMhPSJzdHJpbmciKS5tYXAoKFsscl0pPT5yKSxkPWFzeW5jKG89e30scj17fSxzPXt9KT0+e3RyeXtsZXRbZSxhLGMsaV09YXdhaXQgUHJvbWlzZS5hbGwoW2ltcG9ydChvLmZvbnRBd2Vzb21lVXJsKyIvZm9udGF3ZXNvbWUtc3ZnLWNvcmUiKSxpbXBvcnQoby5mb250QXdlc29tZVVybCsiL2ZyZWUtc29saWQtc3ZnLWljb25zIiksaW1wb3J0KG8uZm9udEF3ZXNvbWVVcmwrIi9mcmVlLXJlZ3VsYXItc3ZnLWljb25zIiksaW1wb3J0KG8uZm9udEF3ZXNvbWVVcmwrIi9mcmVlLWJyYW5kcy1zdmctaWNvbnMiKV0pLGY9Wy4uLm4oYSksLi4ubihjKSwuLi5uKGkpXTtpZihlLmNvbmZpZy5hdXRvQWRkQ3NzPSExLGUubGlicmFyeS5hZGQoLi4uZiksZS5kb20uaTJzdmcoKSxlLmRvbS53YXRjaCgpLCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXh0cmFqcy1mb250YXdlc29tZSIpKXtsZXQgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3QuaWQ9ImV4dHJhanMtZm9udGF3ZXNvbWUiLHQudGV4dENvbnRlbnQ9ZS5kb20uY3NzKCksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0KSxuZXcgTXV0YXRpb25PYnNlcnZlcigoKT0+e3QmJnQudGV4dENvbnRlbnQ9PT0iIiYmKHQudGV4dENvbnRlbnQ9ZS5kb20uY3NzKCkpfSkub2JzZXJ2ZSh0LHtjaGFyYWN0ZXJEYXRhOiEwLGNoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9fWNhdGNoKGUpe3Rocm93IGV9fTtleHBvcnR7ZCBhcyBkZWZhdWx0fTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5pdC1mb250LWF3ZXNvbWUubWpzLm1hcAo=\",\n  INIT_UNO_CSS: \"dmFyIGg9YXN5bmModD17fSxuPXt9LGk9e30pPT57bGV0IGU9ey4uLm59O2UucHJlc2V0SWNvbnMmJihlLnByZXNldEljb25zLmNkbj10LnVub0NTU1ByZXNldEljb25DRE4pO2xldFt7ZGVmYXVsdDpwfSx7ZGVmYXVsdDpvfSx7ZGVmYXVsdDp1fSx7ZGVmYXVsdDphfSx7ZGVmYXVsdDpsfSx7ZGVmYXVsdDpmfSx7ZGVmYXVsdDpTfSx7ZGVmYXVsdDpjfSx7ZGVmYXVsdDp5fSx7ZGVmYXVsdDptfV09YXdhaXQgUHJvbWlzZS5hbGwoW2ltcG9ydCh0LnVub0NTU1VybCsiL3J1bnRpbWUiKSxpbXBvcnQodC51bm9DU1NVcmwrIi9wcmVzZXQtaWNvbnMvYnJvd3NlciIpLGltcG9ydCh0LnVub0NTU1VybCsiL3ByZXNldC11bm8iKSxpbXBvcnQodC51bm9DU1NVcmwrIi9wcmVzZXQtd2luZCIpLGltcG9ydCh0LnVub0NTU1VybCsiL3ByZXNldC1taW5pIiksaW1wb3J0KHQudW5vQ1NTVXJsKyIvcHJlc2V0LWF0dHJpYnV0aWZ5IiksaW1wb3J0KHQudW5vQ1NTVXJsKyIvcHJlc2V0LXR5cG9ncmFwaHkiKSxpbXBvcnQodC51bm9DU1NVcmwrIi9wcmVzZXQtd2ViLWZvbnRzIiksaW1wb3J0KHQudW5vQ1NTVXJsKyIvcHJlc2V0LXRhZ2lmeSIpLGltcG9ydCh0LnVub0NTU1VybCsiL3ByZXNldC1yZW0tdG8tcHgiKV0pLHI9W107aWYoZS5wcmVzZXRXaW5kP3IucHVzaChhKGUucHJlc2V0V2luZCkpOmUucHJlc2V0TWluaT9yLnB1c2gobChlLnByZXNldE1pbmkpKTpyLnB1c2godSgpKSxlLnByZXNldEljb25zKXtsZXQgcz17Li4uZS5wcmVzZXRJY29uc307aT8ucHJlc2V0SWNvbnM/LmNvbGxlY3Rpb25zJiZ0LnVzZUJ1bmRsZUljb25pZnlKc29uJiYocy5hdXRvSW5zdGFsbD0hMSxzLmNvbGxlY3Rpb25zPWkucHJlc2V0SWNvbnMuY29sbGVjdGlvbnMpLHIucHVzaChvKHMpKX1lLnByZXNldEF0dHJpYnV0aWZ5JiZyLnB1c2goZihlLnByZXNldEF0dHJpYnV0aWZ5KSksZS5wcmVzZXRUeXBvZ3JhcGh5JiZyLnB1c2goUyhlLnByZXNldFR5cG9ncmFwaHkpKSxlLnByZXNldFdlYkZvbnRzJiZyLnB1c2goYyhlLnByZXNldFdlYkZvbnRzKSksZS5wcmVzZXRUYWdpZnkmJnIucHVzaCh5KGUucHJlc2V0VGFnaWZ5KSksZS5wcmVzZXRSZW1Ub1B4JiZyLnB1c2gobSgpKTtsZXQgZD1lLnJ1bGVzPz9bXTtwKHtkZWZhdWx0czp7cnVsZXM6ZCxwcmVzZXRzOnJ9fSl9O2V4cG9ydHtoIGFzIGRlZmF1bHR9OwovLyMgc291cmNlTWFwcGluZ1VSTD1pbml0LXVuby1jc3MubWpzLm1hcAo=\",\n};\n", "import type { ExtraJSFrontMatter, ExtraJSOptions } from \"./types.ts\";\nimport SRC_BASE64 from \"./base64js.ts\";\n\nexport const initAll = (\n  extrajsOptions: ExtraJSOptions,\n): string =>\n  (extrajsOptions.useMermaid || extrajsOptions.useFontAwesome ||\n      extrajsOptions.useUnoCSS)\n    ? `\nexport default async (options = {}, frontMatter = {}, _conf = {}) => {\n  const tasks = [];\n${\n      extrajsOptions.useMermaid\n        ? `\n  const mermaidScript = document.getElementById('extrajs')?.getAttribute('data-extrajs-mermaid-js');\n  if (mermaidScript) {\n    tasks.push(\n      (async () => {\n        const initMermaid = await import(\"data:text/javascript;base64,\" + mermaidScript);\n        await initMermaid.default(options, frontMatter, _conf);\n      })()\n    );\n  }`\n        : \"\"\n    }\n${\n      extrajsOptions.useFontAwesome\n        ? `\n  const fontAwesomeScript = document.getElementById('extrajs')?.getAttribute('data-extrajs-font-awesome');\n  if (fontAwesomeScript) {\n    tasks.push(\n      (async () => {\n        const initFontAwesome = await import(\"data:text/javascript;base64,\" + fontAwesomeScript);\n        await initFontAwesome.default(options, frontMatter, _conf);\n      })()\n    );\n  }`\n        : \"\"\n    }\n${\n      extrajsOptions.useUnoCSS\n        ? `\n  const unoCSSScript = document.getElementById('extrajs')?.getAttribute('data-extrajs-uno-css');\n  if (unoCSSScript) {\n    tasks.push(\n      (async () => {\n        const initUnoCSS = await import(\"data:text/javascript;base64,\" + unoCSSScript);\n        await initUnoCSS.default(options, frontMatter, _conf);\n      })()\n    );\n  }`\n        : \"\"\n    }\n  tasks.length > 0 && await Promise.all(tasks);\n};`\n    : \"\";\n\nexport const createTemplateTag = (\n  extrajsOptions: ExtraJSOptions,\n  frontMatter: ExtraJSFrontMatter,\n): string =>\n  (extrajsOptions.useMermaid || extrajsOptions.useFontAwesome ||\n      extrajsOptions.useUnoCSS)\n    ? `\n<template\n  id=\"extrajs\"\n${\n      extrajsOptions.useMermaid\n        ? `data-extrajs-mermaid-js=\"${SRC_BASE64.INIT_MERMAID}\"`\n        : \"\"\n    }\n${\n      extrajsOptions.useFontAwesome\n        ? `data-extrajs-font-awesome=\"${SRC_BASE64.INIT_FONT_AWESOME}\"`\n        : \"\"\n    }\n${\n      extrajsOptions.useUnoCSS\n        ? `data-extrajs-uno-css=\"${SRC_BASE64.INIT_UNO_CSS}\"`\n        : \"\"\n    }\n${`data-extrajs-init=\"${btoa(initAll(extrajsOptions))}\"`}\n${`data-extrajs-options=\"${\n      btoa(\"export default\" + JSON.stringify(extrajsOptions))\n    }\"`}\n${`data-extrajs-frontMatter=\"${\n      btoa(\"export default\" + JSON.stringify(frontMatter))\n    }\"`}>\n</template>`\n    : \"\";\n\nexport const createScriptTag = (\n  extrajsOptions: ExtraJSOptions,\n  frontMatter: ExtraJSFrontMatter,\n): string =>\n  (extrajsOptions.useMermaid || extrajsOptions.useFontAwesome ||\n      extrajsOptions.useUnoCSS) && extrajsOptions.outputScriptTag\n    ? `\n<script type=\"module\">\n  const initScript = document.getElementById('extrajs')?.getAttribute('data-extrajs-init');\n  if (initScript) {\n    const init = await import(\"data:text/javascript;base64,\" + initScript);\n    await init.default(\n      ${JSON.stringify(extrajsOptions)},\n      ${JSON.stringify(frontMatter)},\n      {}\n    );\n  }\n</script>`\n    : \"\";\n", "import extraJsPlugin from \"./plugin.ts\";\nexport default extraJsPlugin;\n\nexport * from \"./types.ts\";\nexport * from \"./create-tags.ts\";\n"],
  "mappings": "AAEA,OAAOA,MAA2B,2BAClC,OAAOC,MAAgB,cCHvB,IAAOC,EAAQ,CACb,aAAc,2PACd,kBAAmB,moCACnB,aAAc,8lDAChB,ECDO,IAAMC,EACXC,GAECA,EAAe,YAAcA,EAAe,gBACzCA,EAAe,UACf;AAAA;AAAA;AAAA,EAIAA,EAAe,WACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUA,EACN;AAAA,EAEEA,EAAe,eACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUA,EACN;AAAA,EAEEA,EAAe,UACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUA,EACN;AAAA;AAAA,IAGE,GAEOC,EAAoB,CAC/BD,EACAE,IAECF,EAAe,YAAcA,EAAe,gBACzCA,EAAe,UACf;AAAA;AAAA;AAAA,EAIAA,EAAe,WACX,4BAA4BG,EAAW,YAAY,IACnD,EACN;AAAA,EAEEH,EAAe,eACX,8BAA8BG,EAAW,iBAAiB,IAC1D,EACN;AAAA,EAEEH,EAAe,UACX,yBAAyBG,EAAW,YAAY,IAChD,EACN;AAAA,EACF,sBAAsB,KAAKJ,EAAQC,CAAc,CAAC,CAAC,GAAG;AAAA,EACtD,yBACI,KAAK,iBAAmB,KAAK,UAAUA,CAAc,CAAC,CACxD,GAAG;AAAA,EACL,6BACI,KAAK,iBAAmB,KAAK,UAAUE,CAAW,CAAC,CACrD,GAAG;AAAA,aAED,GAEOE,EAAkB,CAC7BJ,EACAE,KAECF,EAAe,YAAcA,EAAe,gBACzCA,EAAe,YAAcA,EAAe,gBAC5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAME,KAAK,UAAUA,CAAc,CAAC;AAAA,QAC9B,KAAK,UAAUE,CAAW,CAAC;AAAA;AAAA;AAAA;AAAA,YAK7B,GFtGN,IAAMG,EAAiC,CACrC,mBAAoB,GACpB,WAAY,GACZ,WAAY,yBACZ,eAAgB,GAChB,eAAgB,8BAChB,UAAW,GACX,UAAW,yBACX,oBAAqB,kBACrB,gBAAiB,EACnB,EAEO,SAASC,EAAcC,EAAgBC,EAA6B,CACzE,GAAM,CAAE,SAAU,CAAE,OAAAC,CAAO,EAAG,MAAAC,CAAM,EAAIH,EAEpCI,EAAkC,CAAC,EAEnCH,EAAY,oBACdD,EAAG,IAAIK,EAAwBC,GAAgB,CAE/C,CAAC,EAGHN,EAAG,MAAQ,CAACO,EAAkBC,KAC5BJ,EAAcK,EAAWF,CAAQ,EAAE,KAAK,SAAW,CAAC,EAC7CJ,EAAM,KAAKH,EAAIO,EAAUC,CAAG,GAGrCR,EAAG,SAAS,OAAS,YAChBU,EACH,CACA,IAAMC,EAA0B,CAC9B,GAAGb,EACH,GAAGG,EACH,GAAKG,EAAY,WAAqC,CAAC,EAAzB,CAAE,WAAY,EAAM,EAClD,GAAKA,EAAY,eAA6C,CAAC,EAA7B,CAAE,eAAgB,EAAM,EAC1D,GAAKA,EAAY,UAAmC,CAAC,EAAxB,CAAE,UAAW,EAAM,CAClD,EAEA,OAAOF,EAAO,MAAMF,EAAG,SAAUU,CAAI,EACnCE,EAAkBD,EAASP,CAAW,EACtCS,EAAgBF,EAASP,CAAW,CACxC,CACF,CAEA,IAAOU,EAAQf,EGnDf,IAAOgB,EAAQC",
  "names": ["markdownItFrontMatter", "grayMatter", "base64js_default", "initAll", "extrajsOptions", "createTemplateTag", "frontMatter", "base64js_default", "createScriptTag", "defaultOptions", "extraJsPlugin", "md", "userOptions", "render", "parse", "frontMatter", "markdownItFrontMatter", "_fm", "markdown", "env", "grayMatter", "args", "options", "createTemplateTag", "createScriptTag", "plugin_default", "src_default", "plugin_default"]
}
