{
  "version": 3,
  "sources": ["../src/plugin.ts"],
  "sourcesContent": ["import type MarkdownIt from \"markdown-it\";\nimport markdownItFrontMatter from \"markdown-it-front-matter\";\nimport grayMatter from \"gray-matter\";\nimport { createScriptTag, createTemplateTag } from \"./create-tags.js\";\nimport { defaultOptions } from \"./types.js\";\nimport type { ExtraJSFrontMatter, ExtraJSOptions } from \"./types.js\";\n\nexport function extraJsPlugin(md: MarkdownIt, userOptions: ExtraJSOptions) {\n  const { renderer: { render }, parse } = md;\n\n  let frontMatter: ExtraJSFrontMatter = {};\n\n  if (userOptions.discardFrontMatter) {\n    md.use(markdownItFrontMatter, (_fm: string) => {\n      // Discard front matter\n    });\n  }\n\n  md.parse = (markdown: string, env) => {\n    frontMatter = grayMatter(markdown).data.extrajs ?? {};\n    return parse.call(md, markdown, env);\n  };\n\n  md.renderer.render = function (\n    ...args\n  ) {\n    const options: ExtraJSOptions = {\n      ...defaultOptions,\n      ...userOptions,\n      ...(!frontMatter.useMermaid ? { useMermaid: false } : {}),\n      ...(!frontMatter.useFontAwesome ? { useFontAwesome: false } : {}),\n      ...(!frontMatter.useUnoCSS ? { useUnoCSS: false } : {}),\n    };\n\n    return render.apply(md.renderer, args) +\n      createTemplateTag(options, frontMatter) +\n      createScriptTag(options, frontMatter);\n  };\n}\n\nexport default extraJsPlugin;\n"],
  "mappings": "AACA,OAAO,2BAA2B;AAClC,OAAO,gBAAgB;AACvB,SAAS,iBAAiB,yBAAyB;AACnD,SAAS,sBAAsB;AAGxB,SAAS,cAAc,IAAgB,aAA6B;AACzE,QAAM,EAAE,UAAU,EAAE,OAAO,GAAG,MAAM,IAAI;AAExC,MAAI,cAAkC,CAAC;AAEvC,MAAI,YAAY,oBAAoB;AAClC,OAAG,IAAI,uBAAuB,CAAC,QAAgB;AAAA,IAE/C,CAAC;AAAA,EACH;AAEA,KAAG,QAAQ,CAAC,UAAkB,QAAQ;AACpC,kBAAc,WAAW,QAAQ,EAAE,KAAK,WAAW,CAAC;AACpD,WAAO,MAAM,KAAK,IAAI,UAAU,GAAG;AAAA,EACrC;AAEA,KAAG,SAAS,SAAS,YAChB,MACH;AACA,UAAM,UAA0B;AAAA,MAC9B,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAI,CAAC,YAAY,aAAa,EAAE,YAAY,MAAM,IAAI,CAAC;AAAA,MACvD,GAAI,CAAC,YAAY,iBAAiB,EAAE,gBAAgB,MAAM,IAAI,CAAC;AAAA,MAC/D,GAAI,CAAC,YAAY,YAAY,EAAE,WAAW,MAAM,IAAI,CAAC;AAAA,IACvD;AAEA,WAAO,OAAO,MAAM,GAAG,UAAU,IAAI,IACnC,kBAAkB,SAAS,WAAW,IACtC,gBAAgB,SAAS,WAAW;AAAA,EACxC;AACF;AAEA,IAAO,iBAAQ;",
  "names": []
}
